syntax = "proto3";
option java_package = "orbit.shared.proto";

import "google/protobuf/timestamp.proto";

package orbit.shared;

service NodeManagement {
    rpc JoinCluster (JoinClusterRequestProto) returns (RequestLeaseResponseProto);
    rpc RenewLease (RenewLeaseRequestProto) returns (RequestLeaseResponseProto);
}

message JoinClusterRequestProto {
    repeated string addressableTypes = 1;
}

message RenewLeaseRequestProto {
    string challenge_token = 1;
    repeated string addressableTypes = 2;
}

message RequestLeaseResponseProto {
    Status status = 1;
    string node_identity = 2;
    string challenge_token = 3;
    google.protobuf.Timestamp renew_at = 4;
    google.protobuf.Timestamp expires_at = 5;

    enum Status {
        OK = 0;
        INVALID_LEASE = 1;
        INVALID_TOKEN = 2;
        UNKNOWN_ERROR = 3;
    }
}
