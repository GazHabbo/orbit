syntax = "proto3";
option java_package = "orbit.shared.proto";

import "google/protobuf/timestamp.proto";
import "orbit/shared/mesh.proto";


package orbit.shared;

service NodeManagement {
    rpc JoinCluster (JoinClusterRequestProto) returns (RequestLeaseResponseProto);
    rpc RenewLease (RenewLeaseRequestProto) returns (RequestLeaseResponseProto);
}

message JoinClusterRequestProto {
    CapabilitiesProto capabilities = 1;
}

message RenewLeaseRequestProto {
    string challenge_token = 1;
    CapabilitiesProto capabilities = 2;
}

message RequestLeaseResponseProto {
    Status status = 1;
    NodeInfoProto info = 2;

    enum Status {
        OK = 0;
        INVALID_LEASE = 1;
        INVALID_TOKEN = 2;
        UNKNOWN_ERROR = 3;
    }
}
