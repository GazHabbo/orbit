syntax = "proto3";
option java_package = "orbit.shared.proto";

package orbit.shared;

import "orbit/shared/addressable.proto";
import "orbit/shared/mesh.proto";

message MessageProto {
    int64 messageId = 1;
    NodeIdProto source = 2;

    MessageContentProto content = 3;
}

message MessageContentProto {
    oneof content {
        InvocationRequestProto invocation_request = 1;
        InvocationResponseProto invocation_response = 2;
        ErrorProto error = 3;
    }
}

message InvocationRequestProto {
    AddressableReferenceProto reference = 1;
    string value = 2;
}

message InvocationResponseProto {
    string value = 1;
}

message ErrorProto {
    StatusProto status = 1;
    string message = 2;

    enum StatusProto {
        UNKNOWN = 0;
        AUTH_FAILED = 1;
        INVALID_LEASE = 2;
        SERVER_OVERLOADED = 3;
        SECURITY_VIOLATION = 4;
    }
}

